@model EXPEDIT.Transactions.ViewModels.OrderViewModel
@Html.Partial("Header")
@using Braintree;
@{
    Style.Require("Transactions");
    HtmlHelper.ClientValidationEnabled = true;
    HtmlHelper.UnobtrusiveJavaScriptEnabled = true;
    Layout.Title = T("Test").ToString();
}

@*@using (Html.BeginFormAntiForgeryPost(Url.Action(string.Format("{0}", ViewData["TransparentRedirectUrl"]), "User", new { area = "EXPEDIT.Transactions", Controller = "User", Action = "Index" }), FormMethod.Post, new { id = "payment-form", @class = "payment-form" }))*@
@using (Html.BeginFormAntiForgeryPost(string.Format("{0}", Model.PaymentRedirectURL), FormMethod.Post, new { id = "payment-form", @class = "payment-form" }))
{
    
      <input type='hidden' name='tr_data' value='@Model.PaymentData' />
      <div>
        <h2>Customer Information</h2>
        <label for='customer_first_name'>First Name</label>
        <input type='text' name='customer[first_name]' id='customer_first_name' value="@Model.PaymentFirstname" required></input>
        <label for='customer_last_name'>Last Name</label>
        <input type='text' name='customer[last_name]' id='customer_last_name' value="@Model.PaymentLastname" required></input>
        <label for='customer_email'>Email</label>
        <input type='text' name='customer[email]' type="email" id='customer_email' value="@Model.PaymentEmail" required></input>
        <h2>Billing Address</h2>
        <label for='billing_street_address'>Street Address</label>
        <input type='text' name='customer[credit_card][billing_address][street_address]' id='billing_street_address' value="@Model.PaymentStreet" required></input>
        <label for='billing_extended_address'>Extended Address</label>
        <input type='text' name='customer[credit_card][billing_address][extended_address]' id='billing_extended_address' value="@Model.PaymentStreetExtended"></input>
        <label for='billing_locality'>Locality</label>
        <input type='text' name='customer[credit_card][billing_address][locality]' id='billing_locality' value="@Model.PaymentLocality" required></input>
        <label for='billing_region'>Region</label>
        <input type='text' name='customer[credit_card][billing_address][region]' id='billing_region' value="@Model.PaymentRegion" required></input>
        <label for='billing_postal_code'>Postal Code</label>
        <input type='text' name='customer[credit_card][billing_address][postal_code]' id='billing_postal_code' value="@Model.PaymentPostcode" required></input>
      </div>
      <div>
        <h2>Credit Card</h2>
        <label for='braintree_credit_card_number'>Credit Card Number</label>
        <input type='text' name='customer[credit_card][number]' id='braintree_credit_card_number' value='4111111111111111'></input>
        <label for='braintree_credit_card_exp'>Credit Card Expiry (mm/yyyy)</label>
        <input type='text' name='customer[credit_card][expiration_date]' id='braintree_credit_card_exp' value='12/2015' required></input>
      </div>
        <input class='submit-button' type='submit' />
        
   
}

 <script type="text/javascript">
        // just for the demos, avoids form submit
        jQuery.validator.setDefaults({
            debug: false,
            success: "valid"
        });
        $("#payment-form").validate({
            rules: {
                "customer[credit_card][expiration_date]" : {
                        required: true,
                        dateCC: true
                },
                "customer[credit_card][number]": {
                    required: true,
                    creditcard: true
                },
                "customer[email]": {
                    required: true,
                    email2: true
                },
            },
            submitHandler: function(form) {
                form.submit();
            }            
        });
    </script>